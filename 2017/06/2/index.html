<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Angular4的QuickStart——With ES6 Not TypeScript · DongSuo-东索的个人博客</title><meta name="description" content="Angular4的QuickStart——With ES6 Not TypeScript - Dongsuo/东索"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://blog.islasher.com/atom.xml" title="DongSuo-东索的个人博客"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/logo.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="https://islasher.com" target="_blank" class="nav-list-link">HOME</a></li><li class="nav-list-item"><a href="https://v11nlab.com" target="_blank" class="nav-list-link">V11NLAB</a></li><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Angular4的QuickStart——With ES6 Not TypeScript</h1><div class="post-info">Jun 2, 2017</div><div class="post-content"><p>今年3月份，Angular官方发布了新版——Angular4.0.0，新版本的特性已经有很多文章了，在此不一一赘述。</p>
<p>但从Angular2.x以来，JavaScript版本的官方文档就从未完整过，而ES6的QuickStart也从未在日程之内，这对初学者而言多少有点不太友好。虽然网上有ES6+Angular2.x的QuickStart，但是多少有点问题，而且跟Angular4有些不一样，也过时了。今天为了折腾Angular4到处找文档查资料，搞了好久才搞定一个“hello world”，实在有些不爽，为了帮助像我一样的初学者，我觉得把这个ES6的QuickStart写出来也许会有点用。</p>
<a id="more"></a>
<blockquote>
<p>NOTE:本文实现的内容与官方文档中的QuickStart实现的内容没有区别，只是本文是用ES6实现的，而非JavaScript或TypeScript.</p>
</blockquote>
<p>废话少说，show the code.</p>
<p>首先是开发环境，先上package.json：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//package.json</span></div><div class="line">&#123;</div><div class="line">  <span class="string">"name"</span>: <span class="string">"angular4-quickstart-es6-webpack"</span>,</div><div class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">  <span class="string">"description"</span>: <span class="string">"The Angular 4 Quickstart tutorial done in ES6 with webpack and Babel, without using TypeScript."</span>,</div><div class="line">  <span class="string">"scripts"</span>: &#123;</div><div class="line">    <span class="string">"start"</span>: <span class="string">"npm run lite"</span>,</div><div class="line">    <span class="string">"lite"</span>: <span class="string">"lite-server"</span>,</div><div class="line">    <span class="string">"webpack"</span>: <span class="string">"webpack --progress"</span>,</div><div class="line">    <span class="string">"postinstall"</span>: <span class="string">"npm run webpack"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"repository"</span>: &#123;</div><div class="line">    <span class="string">"type"</span>: <span class="string">"git"</span>,</div><div class="line">    <span class="string">"url"</span>: <span class="string">""</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"author"</span>: <span class="string">""</span>,</div><div class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span>,</div><div class="line">  <span class="string">"bugs"</span>: &#123;</div><div class="line">    <span class="string">"url"</span>: <span class="string">""</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"homepage"</span>: <span class="string">""</span>,</div><div class="line">  <span class="string">"dependencies"</span>: &#123;</div><div class="line">    <span class="string">"@angular/common"</span>: <span class="string">"^4.0.0"</span>,</div><div class="line">    <span class="string">"@angular/compiler"</span>: <span class="string">"^4.0.0"</span>,</div><div class="line">    <span class="string">"@angular/core"</span>: <span class="string">"^4.0.0"</span>,</div><div class="line">    <span class="string">"@angular/forms"</span>: <span class="string">"^4.0.0"</span>,</div><div class="line">    <span class="string">"@angular/http"</span>: <span class="string">"^4.0.0"</span>,</div><div class="line">    <span class="string">"@angular/platform-browser"</span>: <span class="string">"^4.0.0"</span>,</div><div class="line">    <span class="string">"@angular/platform-browser-dynamic"</span>: <span class="string">"^4.0.0"</span>,</div><div class="line">    <span class="string">"@angular/router"</span>: <span class="string">"^4.0.0"</span>,</div><div class="line">    <span class="string">"core-js"</span>: <span class="string">"^2.4.1"</span>,</div><div class="line">    <span class="string">"rxjs"</span>: <span class="string">"^5.1.0"</span>,</div><div class="line">    <span class="string">"zone.js"</span>: <span class="string">"^0.8.4"</span>,</div><div class="line">    <span class="string">"es6-promise"</span>: <span class="string">"^3.0.2"</span>,</div><div class="line">    <span class="string">"es6-shim"</span>: <span class="string">"^0.35.0"</span>,</div><div class="line">    <span class="string">"reflect-metadata"</span>: <span class="string">"0.1.2"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="string">"devDependencies"</span>: &#123;</div><div class="line">    <span class="string">"babel-core"</span>: <span class="string">"^6.7.0"</span>,</div><div class="line">    <span class="string">"babel-loader"</span>: <span class="string">"^6.2.4"</span>,</div><div class="line">    <span class="string">"babel-preset-es2015"</span>: <span class="string">"^6.6.0"</span>,</div><div class="line">    <span class="string">"concurrently"</span>: <span class="string">"^2.0.0"</span>,</div><div class="line">    <span class="string">"lite-server"</span>: <span class="string">"^2.1.0"</span>,</div><div class="line">    <span class="string">"script-loader"</span>: <span class="string">"^0.6.1"</span>,</div><div class="line">    <span class="string">"webpack"</span>: <span class="string">"^1.12.14"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>除了Angular官方文档中列出的包和工具之外，还包括了ES6的相关模块及其转码工具Babel。package.json配置好了之后就可以开始配置开发环境了，</p>
<p>目录结构：</p>
<h3 id="开发环境："><a href="#开发环境：" class="headerlink" title="开发环境："></a>开发环境：</h3><p>开发环境的配置需要安装Node(<a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">官网</a>)，然后安装webpack，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install webpack -g</div></pre></td></tr></table></figure>
<p>然后在nges6目录下执行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install</div></pre></td></tr></table></figure>
<p>或者执行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cnpm install</div></pre></td></tr></table></figure>
<p>安装时间可能会有点长，耐心等待，安装完成后，开发所需要的包就会被下载到node_modules文件夹中，接下来是webpack的配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">//webpack.config.js</div><div class="line">var path = require(&apos;path&apos;);</div><div class="line">module.exports = &#123;</div><div class="line">    entry: path.join(__dirname, &apos;public&apos;, &apos;src&apos;,&apos;index.js&apos;),</div><div class="line">    output: &#123;</div><div class="line">        path: path.join(__dirname, &apos;public&apos;, &apos;dist&apos;),</div><div class="line">        filename: &apos;vendor.js&apos;</div><div class="line">    &#125;,</div><div class="line">    devtool: &apos;source-map&apos;,</div><div class="line">    module: &#123;</div><div class="line">        loaders: [</div><div class="line">            &#123;</div><div class="line">                test: /\.js$/,</div><div class="line">                loader: &quot;babel-loader&quot;,</div><div class="line">                query: &#123;</div><div class="line">                    presets: [&apos;es2015&apos;]</div><div class="line">                &#125;</div><div class="line">            &#125;,</div><div class="line">        ]</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>配置文件中我们定义了入口文件(public/src/index.js)，然后定义了输出路径和输出文件的命名(public/dist/vendor.js)，webpack将把我们需要的全部依赖打包到一个文件中(vendor.js)，这样我们在HTML中只要用一个script标签引入这个文件就可以了(暂不考虑懒加载的问题)。</p>
<p>不知道上面这部分在说什么的同学，请先以“nodejs”、“npm”、“webpack”等关键词搜索网上的资料。</p>
<h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><p>Angular从2.0开始组件化，关于组件，中文文档中介绍说：“组件是一个 Angular 类，用于把数据展示到<a href="https://angular.cn/docs/ts/latest/glossary.html#view" target="_blank" rel="noopener">视图 (view)</a>，并处理几乎所有的视图显示和交互逻辑。组件是 Angular 系统中最重要的基本构造块之一。”组件是一个应用的基础构成，所以，我们首先在app.component.js中定义一个“组件”：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">//app.component.js</div><div class="line">import &#123;Component&#125; from &apos;@angular/core&apos;;</div><div class="line"></div><div class="line">class AppComponent &#123;</div><div class="line">    static get annotations() &#123;</div><div class="line">        return [</div><div class="line">            new Component(&#123;</div><div class="line">                selector: &quot;my-app&quot;,</div><div class="line">                template: &apos;&lt;h1&gt;My First Angular 2 App&lt;/h1&gt;&apos;</div><div class="line">            &#125;),</div><div class="line">        ];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    constructor () &#123;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">export &#123;AppComponent&#125;;</div></pre></td></tr></table></figure>
<p>在组件的定义中，需要用装饰器(Decorator)将组件的元数据附加到类上，然后Angular根据这些元数据创建一个组件实例。但是由于ES6目前不支持装饰器语法，因此通过static get annotations()方法完成这一工作。</p>
<h3 id="模块："><a href="#模块：" class="headerlink" title="模块："></a>模块：</h3><p>Angular是以模块的形式来组织代码，每个Angular应用都至少有一个根模块(Root Module)，所以接下来是app.module.js:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">//app.module.js</div><div class="line">import &#123;BrowserModule&#125; from &apos;@angular/platform-browser&apos;;</div><div class="line">import &#123;NgModule&#125; from &apos;@angular/core&apos;;</div><div class="line">import &#123;AppComponent&#125; from &apos;./app.component&apos;;</div><div class="line"></div><div class="line">class AppModule&#123;</div><div class="line">	static get annotations() &#123;</div><div class="line">		return [</div><div class="line">            new NgModule(&#123;</div><div class="line">				imports: [ BrowserModule ],</div><div class="line">                declarations: [ AppComponent ],</div><div class="line">		      	bootstrap: [ AppComponent ]</div><div class="line">			&#125;)</div><div class="line">        ];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">export &#123;AppModule&#125;;</div></pre></td></tr></table></figure>
<p>首先用ES6中的import关键字导入依赖的包(platform-browser/core)以及我们编写的组件(app.component)，然后用class关键字声明我们的根模块(AppModule)。关于impors、declarations、bootstrap的含义，请查阅官方文档中关于根模块的部分<a href="https://angular.cn/docs/ts/latest/guide/appmodule.html" target="_blank" rel="noopener">官方文档链接</a></p>
<h3 id="启动引导："><a href="#启动引导：" class="headerlink" title="启动引导："></a>启动引导：</h3><p>在main.js中启动(bootstrap)根模块，这个引导文件基本上只写这一次就OK了:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">//main.js</div><div class="line">import &#123;platformBrowserDynamic&#125; from &apos;@angular/platform-browser-dynamic&apos;;</div><div class="line">import &#123;AppModule&#125; from &apos;./app.module&apos;;</div><div class="line"></div><div class="line">let boot = document.addEventListener(&apos;DOMContentLoaded&apos;, () =&gt; &#123;</div><div class="line">    platformBrowserDynamic().bootstrapModule(AppModule);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">module.exports = boot;</div></pre></td></tr></table></figure>
<h3 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h3><p>index.js用于告诉webpack需要打包的依赖都有哪些。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">//index.js</div><div class="line">require(&apos;!!script!../../node_modules/es6-shim/es6-shim.min.js&apos;);</div><div class="line">require(&apos;!!script!../../node_modules/core-js/client/shim.min.js&apos;);</div><div class="line">require(&apos;!!script!../../node_modules/zone.js/dist/zone.js&apos;);</div><div class="line">require(&apos;!!script!../../node_modules/rxjs/bundles/Rx.min.js&apos;);</div><div class="line">require(&apos;!!script!../../node_modules/@angular/core/bundles/core.umd.js&apos;);</div><div class="line">require(&apos;!!script!../../node_modules/@angular/common/bundles/common.umd.js&apos;);</div><div class="line">require(&apos;!!script!../../node_modules/@angular/compiler/bundles/compiler.umd.js&apos;);</div><div class="line">require(&apos;!!script!../../node_modules/@angular/platform-browser/bundles/platform-browser.umd.js&apos;);</div><div class="line">require(&apos;!!script!../../node_modules/@angular/platform-browser-dynamic/bundles/platform-browser-dynamic.umd.js&apos;);</div><div class="line"></div><div class="line"></div><div class="line">require(&apos;./app/main&apos;);</div></pre></td></tr></table></figure>
<h3 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h3><p>最后是index.html文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">    &lt;title&gt;Angular 4 QuickStart&lt;/title&gt;</div><div class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</div><div class="line">&lt;/head&gt;</div><div class="line"></div><div class="line">&lt;body&gt;</div><div class="line">    &lt;my-app&gt;Loading...&lt;/my-app&gt;</div><div class="line"></div><div class="line">    &lt;script type=&quot;text/javascript&quot; src=&quot;public/dist/vendor.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>代码写好了，接下来是两个命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">webpack --progress</div><div class="line">npm start</div></pre></td></tr></table></figure>
<p>这两个命令会将所有需要的js模块打包到vendor.js中，并启动一个本地服务器，调用你的浏览器，你会看到你的应用跑起来了：</p>
<p><img src="../../../resource/my-first-angular-app.jpg"></p>
<p>由于本人也是入门级选手，很多东西也没搞清楚，所以文章写得很简单。但是其中的诸多概念都有不少文章有所论述，可以在网上查到，我也不可能说得更明白，所以就不拾人牙慧了，更深入的内容留待以后探讨。本文主要是提供一个基于webpack+ES6的QuickStart，如有问题，欢迎留言探讨。</p>
</div></article></div></main><footer><div class="paginator"><a href="/2017/07/6/" class="prev">PREV</a><a href="/2017/04/23/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2021 <a href="https://blog.islasher.com">Dongsuo/东索</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-110850031-1",'auto');ga('send','pageview');</script></body></html>